<!DOCTYPE html>
{% load static %}
{% load cache %} <!-- Adicione esta linha -->
{% url 'login' as login_url %}
{% url 'logout' as logout_url %}
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Big Flavor - Sabores Inesquecíveis</title>
    
    <!-- Otimização de carregamento de recursos externos -->
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"></noscript>
    
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"></noscript>

    <link rel="preload" href="https://unpkg.com/aos@2.3.1/dist/aos.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://unpkg.com/aos@2.3.1/dist/aos.css"></noscript>
    
    <!-- Cache para CSS estático -->
    {% cache 86400 css_index %} <!-- Cache por 24 horas -->
    <link href="{% static "css/index.css" %}" rel="stylesheet">
    {% endcache %}
    
</head>
<body>
    <!-- Cache para navbar -->
    {% cache 3600 navbar_index request.user.is_authenticated %} <!-- Cache por 1 hora, diferenciado por estado de autenticação -->
    <!-- Nav Bar Start -->
    <nav class="navbar navbar-expand-lg navbar-light fixed-top">
        <div class="container">
            {% if request.user.is_authenticated %}
            <a href="{% url 'dashboard' %}" class="navbar-brand">Big <span>Flavor</span></a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse">
                <span class="navbar-toggler-icon"></span>
            </button>
            {% endif %}

            {% if not request.user.is_authenticated %}
            <a href="{% url 'Index' %}" class="navbar-brand">Big <span>Flavor</span></a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse">
                <span class="navbar-toggler-icon"></span>
            </button>
            {% endif %}

            <div class="collapse navbar-collapse" id="navbarCollapse">
                <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                    <!-- Elementos apenas para usuários logados -->
                    {% if request.user.is_authenticated %}
                    <li class="nav-item"> 
                        <a class="nav-link" href="{% url 'dashboard' %}">Home</a> 
                    </li>
                    {% endif %}

                    <!-- Elementos apenas para usuários NÃO logados -->
                    {% if not request.user.is_authenticated %}
                    <li class="nav-item">
                        <a href="{% url 'Index' %}" class="nav-link active">Home</a>
                    </li>
                    <li class="nav-item">
                        <a href="{% url 'registro' %}" class="nav-link">Criar Conta</a>
                    </li>
                    <li class="nav-item">
                        <a href="{% url 'sobre' %}" class="nav-link">Sobre Nós</a>
                    </li>
                    {% endif %}

                    <li class="nav-item">
                        <a href="{% url 'lista_produtos' %}" class="nav-link">Cardápio</a>
                    </li>
                    <li class="nav-item">
                        <a href="{% url 'contacto' %}" class="nav-link">Contactar Nós</a>
                    </li>

                    <!-- Elementos apenas para usuários logados -->
                    {% if request.user.is_authenticated %}
                    <li class="nav-item"> 
                        <a class="nav-link" href="{{ logout_url }}">Logout</a> 
                    </li>
                    {% else %}
                    <li class="nav-item">
                        <a class="nav-link" href="{{ login_url }}">Login</a>
                    </li>
                    {% endif %}
                    
                    <li class="nav-item dropdown">
                        <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">Pages</a>
                        <ul class="dropdown-menu">
                            <li><a href="{% url 'lista_publicacoes' %}" class="dropdown-item">Publicações</a></li>
                            
                            <!-- Elementos apenas para usuários logados -->
                            {% if request.user.is_authenticated %}
                            <li><a href="{% url 'historico_pedidos' %}" class="dropdown-item">Historicos dos Pedidos</a></li>
                            <li><a href="{% url 'perfil' %}" class="dropdown-item">Perfil</a></li>
                            <li><a href="{% url 'lista_favoritos' %}" class="dropdown-item">Meus Favoritos</a></li>
                            {% endif %}
                        </ul>
                    </li>
                    
                    <!-- Elementos apenas para usuários logados -->
                    {% if request.user.is_authenticated %}
                    <li class="nav-item position-relative">
                        <a href="{% url 'ver_carrinho' %}" class="nav-link">
                            <i class="fas fa-shopping-cart me-1"></i>
                            Carrinho
                            {% if user.is_authenticated %}
                                {% with user.carrinho_set.first as carrinho %}
                                    {% if carrinho and carrinho.total_itens > 0 %}
                                        <span class="badge-cart">
                                            {{ carrinho.total_itens }}
                                        </span>
                                    {% endif %}
                                {% endwith %}
                            {% endif %}
                        </a>
                    </li>
                    {% endif %}
                </ul>
            </div>
        </div>
    </nav>
    <!-- Nav Bar End -->
    {% endcache %}

    <!-- Hero Section - Cache estático -->
    {% cache 86400 hero_section %}
    <section class="hero-section">
        <div class="floating-element floating-1"></div>
        <div class="floating-element floating-2"></div>
        
        <div class="hero-background">
            <img src="{% static 'img/big.jpg' %}" alt="Big Flavor Hero">
        </div>
        
        <div class="hero-content">
            <h1 class="hero-title" data-aos="fade-up">Sabores que <span>Transformam</span> Momentos</h1>
            <p class="hero-subtitle" data-aos="fade-up" data-aos-delay="200">Descubra uma experiência gastronômica única onde cada mordida conta uma história</p>
            <div class="hero-buttons" data-aos="fade-up" data-aos-delay="400">
                <a href="{% url 'lista_produtos' %}" class="btn btn-hero btn-hero-primary pulse">Explorar Cardápio</a>
                <a href="{% url 'registro' %}" class="btn btn-hero btn-hero-secondary">Criar Conta</a>
            </div>
        </div>
    </section>
    {% endcache %}

    <!-- About Hero Section - Cache estático -->
    {% cache 86400 about_hero %}
    <section id="about" class="about-hero">
        <div class="floating-element floating-1"></div>
        <div class="floating-element floating-2"></div>
        
        <div class="about-hero-background">
            <img src="{% static "img/carousel-1.jpg" %}" alt="Big Flavor Sobre Nós">
        </div>
        
        <div class="about-hero-content">
            <h1 class="about-hero-title" data-aos="fade-up">Nossa <span>Jornada</span> Gastronômica</h1>
            <p class="about-hero-subtitle" data-aos="fade-up" data-aos-delay="200">
                Descubra a paixão, a dedicação e a história por trás de cada sabor que criamos
            </p>
        </div>
    </section>
    {% endcache %}

    <!-- About Story Section - Cache com timeout curto para vídeos dinâmicos -->
    {% cache 300 about_story video_principal.id videos_galeria.count %} <!-- Cache por 5 minutos -->
    <section class="section">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-6" data-aos="fade-right">
                    <div class="about-img">
                        {% if video_principal %}
                            {% if video_principal.thumbnail %}
                                <img src="{{ video_principal.thumbnail.url }}" alt="{{ video_principal.titulo }}" class="video-thumbnail">
                            {% else %}
                                <div class="video-thumbnail" style="background: var(--gradient-primary); display: flex; align-items: center; justify-content: center; color: white;">
                                    <i class="fas fa-play-circle fa-3x"></i>
                                </div>
                            {% endif %}
                            <button type="button" class="btn-play" data-bs-toggle="modal" data-bs-target="#videoModal" 
                                    data-video-url="{{ video_principal.get_video_url }}" 
                                    data-video-type="{% if video_principal.is_youtube %}youtube{% else %}upload{% endif %}"
                                    data-video-title="{{ video_principal.titulo }}"
                                    data-video-format="{{ video_principal.formato_video }}">
                                <i class="fas fa-play"></i>
                            </button>
                        {% else %}
                            <!-- Fallback -->
                            <img src="{% static 'img/about-story.jpg' %}" alt="Nossa História">
                            <button type="button" class="btn-play" data-bs-toggle="modal" data-bs-target="#videoModal" 
                                    data-video-url="https://www.youtube.com/embed/DWRcNpR6Kdc" 
                                    data-video-type="youtube"
                                    data-video-title="Nossa História">
                                <i class="fas fa-play"></i>
                            </button>
                        {% endif %}
                    </div>
                </div>
                <div class="col-lg-6" data-aos="fade-left">
                    <div class="about-content">
                        <div class="section-header text-start">
                            <h2 class="section-title">Nossa História</h2>
                        </div>
                        <div class="about-text">
                            <p class="mb-4">
                                Tudo começou em 2018, quando o Chef Carlos Silva decidiu transformar sua paixão pela culinária em um sonho concreto. Com apenas uma pequena cozinha e muita determinação, nasceu o Big Flavor.
                            </p>
                            <p class="mb-4">
                                Hoje, somos uma família de mais de 50 colaboradores apaixonados por criar experiências gastronômicas memoráveis. Cada prato conta uma história, cada ingrediente é cuidadosamente selecionado, e cada cliente é tratado como parte da nossa família.
                            </p>
                            <p class="mb-4">
                                Nossa missão vai além de servir comida excepcional - queremos criar momentos especiais que ficarão para sempre na memória dos nossos clientes.
                            </p>
                            <a href="{% url 'lista_produtos' %}" class="btn btn-cta">Explorar Cardápio</a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Galeria de Vídeos Adicionais -->
            {% if videos_galeria %}
            <div class="video-gallery" data-aos="fade-up">
                <div class="section-header">
                    <h2 class="section-title">Mais da Nossa História</h2>
                    <p class="section-subtitle">Descubra outros momentos especiais da nossa jornada</p>
                </div>
                <div class="row">
                    {% for video in videos_galeria %}
                    <div class="col-lg-4 col-md-6 mb-4">
                        <div class="video-card">
                            <div class="video-card-thumbnail">
                                {% if video.thumbnail %}
                                    <img src="{{ video.thumbnail.url }}" alt="{{ video.titulo }}">
                                {% else %}
                                    <div style="background: var(--gradient-primary); height: 100%; display: flex; align-items: center; justify-content: center; color: white;">
                                        <i class="fas fa-play-circle fa-2x"></i>
                                    </div>
                                {% endif %}
                                <div class="video-card-play">
                                    <i class="fas fa-play"></i>
                                </div>
                            </div>
                            <div class="video-card-body">
                                <h3 class="video-card-title">{{ video.titulo }}</h3>
                                {% if video.descricao %}
                                <p class="video-card-desc">{{ video.descricao|truncatewords:20 }}</p>
                                {% endif %}
                            </div>
                            <button type="button" class="btn w-100" style="border: none; background: var(--light-bg); padding: 12px;" 
                                    data-bs-toggle="modal" data-bs-target="#videoModal" 
                                    data-video-url="{{ video.get_video_url }}" 
                                    data-video-type="{% if video.is_youtube %}youtube{% else %}upload{% endif %}">
                                Assistir Vídeo
                            </button>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
            {% endif %}
        </div>
    </section>
    {% endcache %}

    <!-- Features Section - Cache estático -->
    {% cache 86400 features_section %}
    <section class="section bg-light">
        <div class="container">
            <div class="section-header" data-aos="fade-up">
                <h2 class="section-title">Por que nos Escolher</h2>
                <p class="section-subtitle">Excelência em cada detalhe para uma experiência gastronômica memorável</p>
            </div>
            <div class="row">
                <div class="col-lg-4 col-md-6 mb-4" data-aos="fade-up" data-aos-delay="100">
                    <div class="feature-item">
                        <div class="feature-icon">
                            <i class="fas fa-cheese"></i>
                        </div>
                        <h3>Ingredientes Premium</h3>
                        <p>Selecionamos os melhores ingredientes locais e importados para garantir qualidade e sabor excepcionais em cada prato.</p>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6 mb-4" data-aos="fade-up" data-aos-delay="200">
                    <div class="feature-item">
                        <div class="feature-icon">
                            <i class="fas fa-clock"></i>
                        </div>
                        <h3>Entrega Rápida</h3>
                        <p>Nossa equipe de entrega garante que sua refeição chegue quente e fresca no conforto da sua casa no tempo prometido.</p>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6 mb-4" data-aos="fade-up" data-aos-delay="300">
                    <div class="feature-item">
                        <div class="feature-icon">
                            <i class="fas fa-chef-hat"></i>
                        </div>
                        <h3>Chefs Especializados</h3>
                        <p>Nossos chefs talentosos combinam técnicas tradicionais com inovação para criar pratos únicos e memoráveis.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>
    {% endcache %}

    <!-- Food Categories - Cache estático -->
    {% cache 86400 food_categories %}
    <section class="section">
        <div class="container">
            <div class="section-header" data-aos="fade-up">
                <h2 class="section-title">Nossas Categorias</h2>
                <p class="section-subtitle">Explore nossa variedade de delícias cuidadosamente preparadas</p>
            </div>
            <div class="row">
                <div class="col-lg-4 col-md-6 mb-4" data-aos="zoom-in" data-aos-delay="100">
                    <div class="food-category food-category-1">
                        <div class="food-category-content">
                            <i class="fas fa-hamburger"></i>
                            <h2>Hambúrgueres</h2>
                            <p>Descubra nossos hambúrgueres artesanais com combinações únicas de sabores</p>
                            <a href="{% url 'lista_produtos' %}?query=&categoria=Hambúrgueres">Explorar Cardápio</a>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6 mb-4" data-aos="zoom-in" data-aos-delay="200">
                    <div class="food-category food-category-2">
                        <div class="food-category-content">
                            <i class="fas fa-pizza-slice"></i>
                            <h2>Lanches</h2>
                            <p>Petiscos irresistíveis perfeitos para qualquer momento do dia</p>
                            <a href="{% url 'lista_produtos'%}?query=&categoria=Lanches">Explorar Cardápio</a>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6 mb-4" data-aos="zoom-in" data-aos-delay="300">
                    <div class="food-category food-category-3">
                        <div class="food-category-content">
                            <i class="fas fa-cocktail"></i>
                            <h2>Bebidas</h2>
                            <p>Refresque-se com nossa seleção exclusiva de bebidas e coquetéis</p>
                            <a href="{% url 'lista_produtos' %}?query=&categoria=Bebidas">Explorar Cardápio</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    {% endcache %}

    <!-- Team Section - Cache estático -->
    {% cache 86400 team_section %}
    <section class="section">
        <div class="container">
            <div class="section-header" data-aos="fade-up">
                <h2 class="section-title">Nossa Equipe</h2>
                <p class="section-subtitle">Os talentosos profissionais por trás de cada criação memorável</p>
            </div>
            <div class="row">
                <div class="col-lg-3 col-md-6" data-aos="zoom-in" data-aos-delay="100">
                    <div class="team-item">
                        <div class="team-img">
                            <img src="{% static 'img/team-1.jpg' %}" alt="Chef">
                            <div class="team-social">
                                <a href="#"><i class="fab fa-facebook-f"></i></a>
                                <a href="#"><i class="fab fa-twitter"></i></a>
                                <a href="#"><i class="fab fa-instagram"></i></a>
                            </div>
                        </div>
                        <div class="team-text">
                            <h2>Carlos Silva</h2>
                            <p>Chef Executivo</p>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6" data-aos="zoom-in" data-aos-delay="200">
                    <div class="team-item">
                        <div class="team-img">
                            <img src="{% static 'img/team-2.jpg' %}" alt="Chef">
                            <div class="team-social">
                                <a href="#"><i class="fab fa-facebook-f"></i></a>
                                <a href="#"><i class="fab fa-twitter"></i></a>
                                <a href="#"><i class="fab fa-instagram"></i></a>
                            </div>
                        </div>
                        <div class="team-text">
                            <h2>Ana Rodrigues</h2>
                            <p>Chef de Cozinha</p>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6" data-aos="zoom-in" data-aos-delay="300">
                    <div class="team-item">
                        <div class="team-img">
                            <img src="{% static 'img/team-3.jpg' %}" alt="Chef">
                            <div class="team-social">
                                <a href="#"><i class="fab fa-facebook-f"></i></a>
                                <a href="#"><i class="fab fa-twitter"></i></a>
                                <a href="#"><i class="fab fa-instagram"></i></a>
                            </div>
                        </div>
                        <div class="team-text">
                            <h2>Miguel Santos</h2>
                            <p>Pastry Chef</p>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6" data-aos="zoom-in" data-aos-delay="400">
                    <div class="team-item">
                        <div class="team-img">
                            <img src="{% static 'img/team-4.jpg' %}" alt="Chef">
                            <div class="team-social">
                                <a href="#"><i class="fab fa-facebook-f"></i></a>
                                <a href="#"><i class="fab fa-twitter"></i></a>
                                <a href="#"><i class="fab fa-instagram"></i></a>
                            </div>
                        </div>
                        <div class="team-text">
                            <h2>Sofia Costa</h2>
                            <p>Mixologista</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    {% endcache %}

    <!-- Contact Section - Cache estático -->
    {% cache 86400 contact_section %}
    <section class="section bg-light">
        <div class="container">
            <div class="section-header" data-aos="fade-up">
                <h2 class="section-title">Entre em Contato</h2>
                <p class="section-subtitle">Estamos aqui para tornar sua experiência ainda mais especial</p>
            </div>
            <div class="row">
                <div class="col-12">
                    <div class="row">
                        <!-- Endereço -->
                        <div class="col-lg-3 col-md-6 mb-4" data-aos="fade-up" data-aos-delay="100">
                            <div class="contact-info">
                                <div class="contact-icon">
                                    <i class="fas fa-map-marker-alt"></i>
                                </div>
                                <div class="contact-text">
                                    <h3>Endereço</h3>
                                    <p>123 Street, New York, USA</p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Telefone -->
                        <div class="col-lg-3 col-md-6 mb-4" data-aos="fade-up" data-aos-delay="200">
                            <div class="contact-info">
                                <div class="contact-icon">
                                    <i class="fas fa-phone-alt"></i>
                                </div>
                                <div class="contact-text">
                                    <h3>Telefone</h3>
                                    <p>+012 345 67890</p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Email -->
                        <div class="col-lg-3 col-md-6 mb-4" data-aos="fade-up" data-aos-delay="300">
                            <div class="contact-info">
                                <div class="contact-icon">
                                    <i class="fas fa-envelope"></i>
                                </div>
                                <div class="contact-text">
                                    <h3>Email</h3>
                                    <p>info@example.com</p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Redes Sociais -->
                        <div class="col-lg-3 col-md-6 mb-4" data-aos="fade-up" data-aos-delay="400">
                            <div class="contact-info">
                                <div class="contact-icon">
                                    <i class="fas fa-share"></i>
                                </div>
                                <div class="contact-text">
                                    <h3>Siga-nos</h3>
                                    <div class="contact-social">
                                        <a href="#"><i class="fab fa-facebook-f"></i></a>
                                        <a href="#"><i class="fab fa-twitter"></i></a>
                                        <a href="#"><i class="fab fa-instagram"></i></a>
                                        <a href="#"><i class="fab fa-linkedin-in"></i></a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    {% endcache %}

    <!-- Footer - Cache estático -->
    {% cache 86400 footer_index %}
    <footer class="footer">
        <div class="container">
            <div class="row">
                <div class="col-lg-7">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="footer-contact">
                                <h2>Nosso Endereço</h2>
                                <p><i class="fa fa-map-marker-alt"></i>123 Street, New York, USA</p>
                                <p><i class="fa fa-phone-alt"></i>+012 345 67890</p>
                                <p><i class="fa fa-envelope"></i>info@example.com</p>
                                <div class="footer-social">
                                    <a href=""><i class="fab fa-twitter"></i></a>
                                    <a href=""><i class="fab fa-facebook-f"></i></a>
                                    <a href=""><i class="fab fa-youtube"></i></a>
                                    <a href=""><i class="fab fa-instagram"></i></a>
                                    <a href=""><i class="fab fa-linkedin-in"></i></a>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="footer-link">
                                <h2>Links Rápidos</h2>
                                <a href="">Termos de Uso</a>
                                <a href="">Política de Privacidade</a>
                                <a href="">Cookies</a>
                                <a href="">Ajuda</a>
                                <a href="">FAQs</a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-5">
                    <div class="footer-newsletter">
                        <h2>Newsletter</h2>
                        <p>Inscreva-se para receber nossas novidades e promoções exclusivas</p>
                        <div class="form">
                            <input class="form-control" placeholder="Seu Email">
                            <button class="btn btn-custom">Enviar</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="copyright">
            <div class="container">
                <p>Copyright &copy; <a href="#">Big Flavor</a>, Todos os direitos reservados.</p>
            </div>
        </div>
    </footer>
    {% endcache %}

    <!-- Back to top button -->
    <a href="#" class="back-to-top">
        <i class="fas fa-arrow-up"></i>
    </a>

    <!-- Video Modal - SEM CACHE (dinâmico) -->
    <div class="modal fade video-modal" id="videoModal" tabindex="-1" aria-labelledby="videoModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title text-white" id="videoModalLabel">Nossa História</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body p-0">
                    <div class="video-player-container">
                        <!-- Player de YouTube -->
                        <div id="youtubePlayer" class="w-100" style="display: none;">
                            <div class="ratio ratio-16x9">
                                <iframe id="youtubeIframe" src="" frameborder="0" allowfullscreen></iframe>
                            </div>
                        </div>

                        <!-- Player para vídeos locais -->
                        <div id="localVideoPlayer" class="w-100" style="display: none;">
                            <video id="localVideo" class="video-player" controls playsinline>
                                Seu navegador não suporta a reprodução de vídeos.
                            </video>
                            <div class="video-controls">
                                <button class="btn-video-control" id="playPauseBtn">
                                    <i class="fas fa-play"></i>
                                </button>
                                <div class="video-progress" id="progressBar">
                                    <div class="video-progress-bar" id="progress"></div>
                                </div>
                                <div class="video-time" id="currentTime">0:00</div>
                                <div class="video-time">/</div>
                                <div class="video-time" id="duration">0:00</div>
                                <button class="btn-video-control" id="fullscreenBtn">
                                    <i class="fas fa-expand"></i>
                                </button>
                            </div>
                        </div>

                        <!-- Indicador de carregamento -->
                        <div class="video-loading-indicator" id="videoLoading" style="display: none;">
                            <div class="video-loading-spinner"></div>
                            <p>Carregando vídeo...</p>
                        </div>

                        <!-- Mensagem de erro -->
                        <div class="video-error" id="videoError" style="display: none;">
                            <i class="fas fa-exclamation-triangle fa-2x mb-3"></i>
                            <h5>Erro ao Carregar Vídeo</h5>
                            <p id="errorMessage">Ocorreu um erro ao tentar reproduzir o vídeo.</p>
                            <button class="btn btn-light mt-2" onclick="retryVideo()">Tentar Novamente</button>
                        </div>

                        <!-- Aviso de formato -->
                        <div class="video-format-warning" id="formatWarning" style="display: none;">
                            <i class="fas fa-info-circle me-2"></i>
                            <span id="warningText">Para melhor compatibilidade, recomendamos usar vídeos no formato MP4 (H.264).</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Cache para scripts -->
    {% cache 86400 scripts_index %}
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script src="{% static "js/index.js" %}"></script>
    {% endcache %}
</body>
</html>